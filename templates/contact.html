{% extends 'base.html' %}
{% load static %}

{% block content %}

<section class="contact-page">
    
    {% if messages %}
    <div style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
        {% for message in messages %}
        <div class="info-card" style="background-color: {% if message.tags == 'success' %}#d4edda{% else %}#f8d7da{% endif %}; border: 1px solid currentColor; padding: 15px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <p style="margin: 0; color: {% if message.tags == 'success' %}#155724{% else %}#721c24{% endif %}; font-weight: bold;">
                {{ message }}
            </p>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="contact-header">
        <span class="contact-pill">Contact</span>
        <h1>Always happy to <span>connect.</span></h1>
        <p class="contact-subtext">
            Have an idea for a product? Mail me at  
            <strong>balkrishna28tiwari@gmail.com</strong>
        </p>
    </div>

    <div class="contact-grid">
        <div class="contact-info">
            <div class="info-card">
                <h3>WhatsApp</h3>
                <p>Tell me about your idea and I’m here to help.</p>
                <a href="https://wa.me/917016324864" target="_blank">+91 7016324864</a>
            </div>

            <div class="info-card">
                <h3>LinkedIn</h3>
                <p>Let’s connect professionally.</p>
                <a href="https://www.linkedin.com/in/bkt0/" target="_blank">View Profile</a>
            </div>

            <div class="info-card">
                <h3>GitHub</h3>
                <p>Check out my projects & code.</p>
                <a href="https://github.com/krsna-t" target="_blank">https://github.com/krsna-t</a>
            </div>
        </div>

        <form class="contact-form" method="post" action="{% url 'contact' %}" id="contact-form-element">
            {% csrf_token %}

            <label>Name *</label>
            <input type="text" name="name" required>

            <label>Email *</label>
            <input type="email" name="email" required>

            <label>Request *</label>
            <select name="request" required>
                <option value="">Select a request</option>
                <option>Website Development</option>
                <option>Backend / API</option>
                <option>Internship / Job</option>
                <option>Other</option>
            </select>

            <label>Message *</label>
            <textarea name="message" rows="6" required></textarea>

            <button type="submit" id="submit-button">Submit</button>
        </form>
    </div>
</section>

<script>
    const contactForm = document.getElementById('contact-form-element');
    const submitBtn = document.getElementById('submit-button');
    const messageContainer = document.querySelector('[style*="position: fixed"]');

    if (contactForm) {
        contactForm.addEventListener('submit', function() {
            submitBtn.disabled = true;
            submitBtn.innerText = "Sending...";
            submitBtn.style.opacity = "0.6";
            submitBtn.style.cursor = "not-allowed";
        });
    }

    if (messageContainer) {
        setTimeout(function() {
            messageContainer.style.transition = "opacity 0.5s ease";
            messageContainer.style.opacity = '0';
            setTimeout(function() {
                messageContainer.style.display = 'none';
            }, 500); 
        }, 7000); 
    }
</script>

{% endblock %}